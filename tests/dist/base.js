"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ShaderEdge = exports.ShaderEdgeSlot = exports.ShaderSlot = exports.ShaderSlotType = exports.resetGlobalShaderSlotID = exports.ShaderNode = exports.ShaderPropery = void 0;
const utils_1 = require("./utils");
class ShaderPropery {
    constructor(obj) {
        this.type = {};
        this.data = {};
        this.type = obj.type;
        this.data = utils_1.getJsonObject(obj.JSONnodeData);
    }
}
exports.ShaderPropery = ShaderPropery;
class ShaderNode {
    constructor(data) {
        this.type = {};
        this.data = {};
        this.priority = 0;
        this.uuid = '';
        this.slots = [];
        this.slotsMap = new Map;
        this.deps = [];
        this.isMasterNode = false;
        this.type = data.typeInfo;
        this.data = utils_1.getJsonObject(data.JSONnodeData);
        this.uuid = this.data.m_GuidSerialized;
        this.slots = this.data.m_SerializableSlots.map(d => {
            let slot = new ShaderSlot(d, this);
            this.slotsMap.set(slot.id, slot);
            return slot;
        });
    }
    addDependency(dep) {
        if (!this.deps.includes(dep)) {
            this.deps.push(dep);
        }
    }
    setPriority(priority) {
        this.priority = Math.max(priority, this.priority);
        for (let i = 0; i < this.deps.length; i++) {
            this.deps[i].setPriority(this.priority + 1);
        }
    }
    get outputSlots() {
        return this.slots.filter(s => s.type === ShaderSlotType.Output);
    }
    get inputSlots() {
        return this.slots.filter(s => s.type === ShaderSlotType.Input);
    }
    getOutputVarName(idx) {
        return this.outputSlots[idx].varName;
    }
    getInputValue(idx) {
        return this.inputSlots[idx].slotValue;
    }
    generateCode() {
        return '';
    }
}
exports.ShaderNode = ShaderNode;
let _GlobalShaderSlotID_ = 0;
function resetGlobalShaderSlotID() {
    _GlobalShaderSlotID_ = 0;
}
exports.resetGlobalShaderSlotID = resetGlobalShaderSlotID;
var ShaderSlotType;
(function (ShaderSlotType) {
    ShaderSlotType[ShaderSlotType["Input"] = 0] = "Input";
    ShaderSlotType[ShaderSlotType["Output"] = 1] = "Output";
})(ShaderSlotType = exports.ShaderSlotType || (exports.ShaderSlotType = {}));
class ShaderSlot {
    constructor(obj, node) {
        this.typeInfo = {};
        this.data = {};
        this.id = 0;
        this.globalID = 0;
        this.connectSlot = null;
        this.node = null;
        this.type = ShaderSlotType.Input;
        this.typeInfo = obj.typeInfo;
        this.data = utils_1.getJsonObject(obj.JSONnodeData);
        this.node = node;
        this.id = this.data.m_Id;
        this.globalID = _GlobalShaderSlotID_++;
    }
    get varName() {
        return 'var_' + this.globalID;
    }
    get slotValue() {
        var _a;
        if (!this.connectSlot) {
            if ((_a = this.node) === null || _a === void 0 ? void 0 : _a.isMasterNode) {
                return null;
            }
            return this.data.m_Value;
        }
        return this.connectSlot.varName;
    }
}
exports.ShaderSlot = ShaderSlot;
class ShaderEdgeSlot {
    constructor() {
        this.id = 0;
        this.nodeUuid = '';
    }
    set(data) {
        this.id = data.m_SlotId;
        this.nodeUuid = data.m_NodeGUIDSerialized;
    }
}
exports.ShaderEdgeSlot = ShaderEdgeSlot;
class ShaderEdge {
    constructor(data) {
        this.type = {};
        this.data = {};
        this.input = new ShaderEdgeSlot;
        this.output = new ShaderEdgeSlot;
        this.type = data.typeInfo;
        this.data = utils_1.getJsonObject(data.JSONnodeData);
        this.input.set(this.data.m_InputSlot);
        this.output.set(this.data.m_OutputSlot);
    }
}
exports.ShaderEdge = ShaderEdge;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9iYXNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLG1DQUF3QztBQUd4QyxNQUFhLGFBQWE7SUFHdEIsWUFBYSxHQUFRO1FBRnJCLFNBQUksR0FBRyxFQUFFLENBQUM7UUFDVixTQUFJLEdBQUcsRUFBRSxDQUFBO1FBRUwsSUFBSSxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxJQUFJLEdBQUcscUJBQWEsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDaEQsQ0FBQztDQUNKO0FBUEQsc0NBT0M7QUFFRCxNQUFhLFVBQVU7SUFhbkIsWUFBYSxJQUFTO1FBWnRCLFNBQUksR0FBRyxFQUFFLENBQUM7UUFDVixTQUFJLEdBQVEsRUFBRSxDQUFBO1FBRWQsYUFBUSxHQUFHLENBQUMsQ0FBQztRQUNiLFNBQUksR0FBRyxFQUFFLENBQUM7UUFDVixVQUFLLEdBQWlCLEVBQUUsQ0FBQztRQUN6QixhQUFRLEdBQTRCLElBQUksR0FBRyxDQUFDO1FBRTVDLFNBQUksR0FBaUIsRUFBRSxDQUFBO1FBRXZCLGlCQUFZLEdBQUcsS0FBSyxDQUFDO1FBR2pCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUMxQixJQUFJLENBQUMsSUFBSSxHQUFHLHFCQUFhLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBRTdDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztRQUN2QyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQy9DLElBQUksSUFBSSxHQUFHLElBQUksVUFBVSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQTtZQUNsQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQ2pDLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVELGFBQWEsQ0FBRSxHQUFHO1FBQ2QsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQzFCLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ3ZCO0lBQ0wsQ0FBQztJQUVELFdBQVcsQ0FBRSxRQUFRO1FBQ2pCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2xELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUN2QyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQy9DO0lBQ0wsQ0FBQztJQUVELElBQUksV0FBVztRQUNYLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNwRSxDQUFDO0lBRUQsSUFBSSxVQUFVO1FBQ1YsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ25FLENBQUM7SUFFRCxnQkFBZ0IsQ0FBRSxHQUFHO1FBQ2pCLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUM7SUFDekMsQ0FBQztJQUNELGFBQWEsQ0FBRSxHQUFHO1FBQ2QsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQztJQUMxQyxDQUFDO0lBRUQsWUFBWTtRQUNSLE9BQU8sRUFBRSxDQUFDO0lBQ2QsQ0FBQztDQUNKO0FBeERELGdDQXdEQztBQUVELElBQUksb0JBQW9CLEdBQUcsQ0FBQyxDQUFDO0FBQzdCLFNBQWdCLHVCQUF1QjtJQUNuQyxvQkFBb0IsR0FBRyxDQUFDLENBQUM7QUFDN0IsQ0FBQztBQUZELDBEQUVDO0FBRUQsSUFBWSxjQUdYO0FBSEQsV0FBWSxjQUFjO0lBQ3RCLHFEQUFLLENBQUE7SUFDTCx1REFBTSxDQUFBO0FBQ1YsQ0FBQyxFQUhXLGNBQWMsR0FBZCxzQkFBYyxLQUFkLHNCQUFjLFFBR3pCO0FBRUQsTUFBYSxVQUFVO0lBYW5CLFlBQWEsR0FBUSxFQUFFLElBQWdCO1FBWnZDLGFBQVEsR0FBRyxFQUFFLENBQUM7UUFDZCxTQUFJLEdBQVEsRUFBRSxDQUFBO1FBRWQsT0FBRSxHQUFHLENBQUMsQ0FBQztRQUVQLGFBQVEsR0FBRyxDQUFDLENBQUM7UUFFYixnQkFBVyxHQUFrQyxJQUFJLENBQUM7UUFDbEQsU0FBSSxHQUFrQyxJQUFJLENBQUM7UUFFM0MsU0FBSSxHQUFHLGNBQWMsQ0FBQyxLQUFLLENBQUM7UUFHeEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUMsUUFBUSxDQUFDO1FBQzdCLElBQUksQ0FBQyxJQUFJLEdBQUcscUJBQWEsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUM7UUFFNUMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFFakIsSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztRQUN6QixJQUFJLENBQUMsUUFBUSxHQUFHLG9CQUFvQixFQUFFLENBQUM7SUFDM0MsQ0FBQztJQUVELElBQUksT0FBTztRQUNQLE9BQU8sTUFBTSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDbEMsQ0FBQztJQUVELElBQUksU0FBUzs7UUFDVCxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNuQixVQUFJLElBQUksQ0FBQyxJQUFJLDBDQUFFLFlBQVksRUFBRTtnQkFDekIsT0FBTyxJQUFJLENBQUM7YUFDZjtZQUNELE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7U0FDNUI7UUFFRCxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDO0lBQ3BDLENBQUM7Q0FDSjtBQXJDRCxnQ0FxQ0M7QUFFRCxNQUFhLGNBQWM7SUFBM0I7UUFDSSxPQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ1AsYUFBUSxHQUFHLEVBQUUsQ0FBQztJQU1sQixDQUFDO0lBSkcsR0FBRyxDQUFFLElBQVM7UUFDVixJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDeEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUM7SUFDOUMsQ0FBQztDQUNKO0FBUkQsd0NBUUM7QUFFRCxNQUFhLFVBQVU7SUFPbkIsWUFBYSxJQUFTO1FBTnRCLFNBQUksR0FBRyxFQUFFLENBQUM7UUFDVixTQUFJLEdBQVEsRUFBRSxDQUFBO1FBRWQsVUFBSyxHQUFtQixJQUFJLGNBQWMsQ0FBQztRQUMzQyxXQUFNLEdBQW1CLElBQUksY0FBYyxDQUFDO1FBR3hDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUMxQixJQUFJLENBQUMsSUFBSSxHQUFHLHFCQUFhLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBRTdDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDdEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUM1QyxDQUFDO0NBQ0o7QUFkRCxnQ0FjQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEpzb25PYmplY3QgfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5pbXBvcnQgeyBlbWl0IH0gZnJvbSBcInByb2Nlc3NcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTaGFkZXJQcm9wZXJ5IHtcclxuICAgIHR5cGUgPSB7fTtcclxuICAgIGRhdGEgPSB7fVxyXG4gICAgY29uc3RydWN0b3IgKG9iajogYW55KSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gb2JqLnR5cGU7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZ2V0SnNvbk9iamVjdChvYmouSlNPTm5vZGVEYXRhKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNoYWRlck5vZGUge1xyXG4gICAgdHlwZSA9IHt9O1xyXG4gICAgZGF0YTogYW55ID0ge31cclxuXHJcbiAgICBwcmlvcml0eSA9IDA7XHJcbiAgICB1dWlkID0gJyc7XHJcbiAgICBzbG90czogU2hhZGVyU2xvdFtdID0gW107XHJcbiAgICBzbG90c01hcDogTWFwPG51bWJlciwgU2hhZGVyU2xvdD4gPSBuZXcgTWFwO1xyXG5cclxuICAgIGRlcHM6IFNoYWRlck5vZGVbXSA9IFtdXHJcblxyXG4gICAgaXNNYXN0ZXJOb2RlID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IgKGRhdGE6IGFueSkge1xyXG4gICAgICAgIHRoaXMudHlwZSA9IGRhdGEudHlwZUluZm87XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZ2V0SnNvbk9iamVjdChkYXRhLkpTT05ub2RlRGF0YSk7XHJcblxyXG4gICAgICAgIHRoaXMudXVpZCA9IHRoaXMuZGF0YS5tX0d1aWRTZXJpYWxpemVkO1xyXG4gICAgICAgIHRoaXMuc2xvdHMgPSB0aGlzLmRhdGEubV9TZXJpYWxpemFibGVTbG90cy5tYXAoZCA9PiB7XHJcbiAgICAgICAgICAgIGxldCBzbG90ID0gbmV3IFNoYWRlclNsb3QoZCwgdGhpcylcclxuICAgICAgICAgICAgdGhpcy5zbG90c01hcC5zZXQoc2xvdC5pZCwgc2xvdCk7XHJcbiAgICAgICAgICAgIHJldHVybiBzbG90O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZERlcGVuZGVuY3kgKGRlcCkge1xyXG4gICAgICAgIGlmICghdGhpcy5kZXBzLmluY2x1ZGVzKGRlcCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kZXBzLnB1c2goZGVwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UHJpb3JpdHkgKHByaW9yaXR5KSB7XHJcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IE1hdGgubWF4KHByaW9yaXR5LCB0aGlzLnByaW9yaXR5KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGVwcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmRlcHNbaV0uc2V0UHJpb3JpdHkodGhpcy5wcmlvcml0eSArIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgb3V0cHV0U2xvdHMgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNsb3RzLmZpbHRlcihzID0+IHMudHlwZSA9PT0gU2hhZGVyU2xvdFR5cGUuT3V0cHV0KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaW5wdXRTbG90cyAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2xvdHMuZmlsdGVyKHMgPT4gcy50eXBlID09PSBTaGFkZXJTbG90VHlwZS5JbnB1dCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0T3V0cHV0VmFyTmFtZSAoaWR4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3V0cHV0U2xvdHNbaWR4XS52YXJOYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0SW5wdXRWYWx1ZSAoaWR4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXRTbG90c1tpZHhdLnNsb3RWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZUNvZGUgKCkge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufVxyXG5cclxubGV0IF9HbG9iYWxTaGFkZXJTbG90SURfID0gMDtcclxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0R2xvYmFsU2hhZGVyU2xvdElEICgpIHtcclxuICAgIF9HbG9iYWxTaGFkZXJTbG90SURfID0gMDtcclxufVxyXG5cclxuZXhwb3J0IGVudW0gU2hhZGVyU2xvdFR5cGUge1xyXG4gICAgSW5wdXQsXHJcbiAgICBPdXRwdXRcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNoYWRlclNsb3Qge1xyXG4gICAgdHlwZUluZm8gPSB7fTtcclxuICAgIGRhdGE6IGFueSA9IHt9XHJcblxyXG4gICAgaWQgPSAwO1xyXG5cclxuICAgIGdsb2JhbElEID0gMDtcclxuXHJcbiAgICBjb25uZWN0U2xvdDogU2hhZGVyU2xvdCB8IG51bGwgfCB1bmRlZmluZWQgPSBudWxsO1xyXG4gICAgbm9kZTogU2hhZGVyTm9kZSB8IG51bGwgfCB1bmRlZmluZWQgPSBudWxsO1xyXG5cclxuICAgIHR5cGUgPSBTaGFkZXJTbG90VHlwZS5JbnB1dDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAob2JqOiBhbnksIG5vZGU6IFNoYWRlck5vZGUpIHtcclxuICAgICAgICB0aGlzLnR5cGVJbmZvID0gb2JqLnR5cGVJbmZvO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGdldEpzb25PYmplY3Qob2JqLkpTT05ub2RlRGF0YSk7XHJcblxyXG4gICAgICAgIHRoaXMubm9kZSA9IG5vZGU7XHJcblxyXG4gICAgICAgIHRoaXMuaWQgPSB0aGlzLmRhdGEubV9JZDtcclxuICAgICAgICB0aGlzLmdsb2JhbElEID0gX0dsb2JhbFNoYWRlclNsb3RJRF8rKztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdmFyTmFtZSAoKSB7XHJcbiAgICAgICAgcmV0dXJuICd2YXJfJyArIHRoaXMuZ2xvYmFsSUQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNsb3RWYWx1ZSAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbm5lY3RTbG90KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vZGU/LmlzTWFzdGVyTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5tX1ZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdFNsb3QudmFyTmFtZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNoYWRlckVkZ2VTbG90IHtcclxuICAgIGlkID0gMDtcclxuICAgIG5vZGVVdWlkID0gJyc7XHJcblxyXG4gICAgc2V0IChkYXRhOiBhbnkpIHtcclxuICAgICAgICB0aGlzLmlkID0gZGF0YS5tX1Nsb3RJZDtcclxuICAgICAgICB0aGlzLm5vZGVVdWlkID0gZGF0YS5tX05vZGVHVUlEU2VyaWFsaXplZDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNoYWRlckVkZ2Uge1xyXG4gICAgdHlwZSA9IHt9O1xyXG4gICAgZGF0YTogYW55ID0ge31cclxuXHJcbiAgICBpbnB1dDogU2hhZGVyRWRnZVNsb3QgPSBuZXcgU2hhZGVyRWRnZVNsb3Q7XHJcbiAgICBvdXRwdXQ6IFNoYWRlckVkZ2VTbG90ID0gbmV3IFNoYWRlckVkZ2VTbG90O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yIChkYXRhOiBhbnkpIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSBkYXRhLnR5cGVJbmZvO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGdldEpzb25PYmplY3QoZGF0YS5KU09Obm9kZURhdGEpO1xyXG5cclxuICAgICAgICB0aGlzLmlucHV0LnNldCh0aGlzLmRhdGEubV9JbnB1dFNsb3QpO1xyXG4gICAgICAgIHRoaXMub3V0cHV0LnNldCh0aGlzLmRhdGEubV9PdXRwdXRTbG90KTtcclxuICAgIH1cclxufSJdfQ==